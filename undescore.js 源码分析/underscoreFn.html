<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
<div>
	<p class="para"></p>
	<p class="para"></p>
</div>
<script src="./underscore.js"></script>
<script>
  window.onload = function () {
		let list = [1, 2, 3];
		function filter(memo, value) {
			return memo * value ;
		}
		_.map(list, filter)

	function map(obj, iteratee, context) {
		if (obj === null) return [];
		var keys = obj.length !== +obj.length && Object.keys(obj),
				length = (keys || obj).length,
				results = Array(length),
				currentIndex;
		for(var index = 0; index < length; index++) {
			currentIndex = keys ? keys[index] : index;
			results[index] = iteratee(obj[currentIndex], currentIndex, obj);
		}
		return results;
	}
	function reduce(obj, iteratee, memo, context) {
		if (obj === null) obj = [];
		var keys = obj.length !== +obj.length && Object.keys(),
				length = (keys || obj).length,
				index = 0, currentIndex;
		if (arguments.length < 3) {
			memo = obj[keys ? keys[index++] : index++];
		}
		for (; index < length; index++) {
			currentIndex = keys ? keys[index] : index;
			memo = iteratee(memo, obj[currentIndex], currentIndex, obj);
		}
		return memo;
	}
	function contact(a, b) {
		return a.concat(b);
	}
	list = [[1, 2], [3, 4], [5, 6]];
	function reduceRight(obj, iteratee, memo, context) {
		if (obj === null) return [];
		var keys = obj.length !== +obj.length && Object.keys(obj),
				index = (keys || obj).length,
				currentIndex;
		if (arguments.length < 3) {
			memo = obj[keys ? keys[--index] : --index];
		}
		while(index-- > 0) {
			currentIndex = keys ? keys[index] : index;
			memo = iteratee(memo, obj[currentIndex], currentIndex, obj);
		}
		return memo;
	}
	list = [1, 2, 4];
	function getOdd(num) {
		return num % 2 === 0;
	}
	function findIndex(array, predicate) {
		var length = !array ? 0 : array.length;
		for (let i = 0; i < length; i++) {
			if (predicate(array[i], i, array)) return i;
		}
		return -1;
	}
	function find(obj, predicate) {
		var key;
		// 对象
		if (obj.length !== +obj.length) {
			key = findKey(obj, predicate);
		} else {
			key = findIndex(obj, predicate);
		}
		if (key !== void 0 && key !== -1) return obj[key]; 
	}
	list = [1, 2, 5, 6];
	function toFilter(num) {
		return num % 2 === 0;
	}
	function filter(obj, predicate, context) {
		let results = [];
		if (obj == null) {
			return results;
		}
		_.each(obj, function(value, index, list) {
			if (predicate(value)) {
				results.push(value);
			}
		})
		return results;
	}
	list = [{name: '张宁宁', age: 18}, {name: '张宁宁', age: 70}];
	function where(list, sObj) {
		let results = [];
		let flag = false;
		if (list == null) {
			return results;
		}
		for (let obj of list) {
			for (let key in obj) {
				if (Object.keys(sObj).includes(key)) {
					if (sObj[key] === obj[key]) {
						flag = true;
					} else {
						flag = false;
					}
				} else {
					flag = false;
				}
			}
			if (flag) {
				results.push(obj);
			}
		}
		return results;
  }
  function name() {
    return function(name) {
			console.log(name);
    }
	}
	list = [4, 4, 4, 4];
	function rejectFn (num) {
		return num % 2 === 0;
	}
	console.log(_.reject(list, rejectFn));
	// 如果obj 中的对象都通过 predicate 函数的真值检验那么返回为true
	function every(obj, predicate) {
		if (obj == null) return true;
		let keys = obj.length == +obj.length && Object.keys(obj);
		let currentKey;
		let length = (keys || obj).length;
		for (let index = 0; index < length; index++) {
			currentKey = keys ? keys[index] : index;
			if (!predicate(obj[currentKey])) return false;
		}
		return true;
	}
	console.log('是否每件事情都达到了', every(list, rejectFn));
	}
</script>
</body>
</html>