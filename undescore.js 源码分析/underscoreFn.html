<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
<div>
	<p class="para"></p>
	<p class="para"></p>
</div>
<script src="./underscore.js"></script>
<script>
  window.onload = function () {
		let list = [1, 2, 3];
		function filter(memo, value) {
			return memo * value ;
		}
		_.map(list, filter)

	function map(obj, iteratee, context) {
		if (obj === null) return [];
		var keys = obj.length !== +obj.length && Object.keys(obj),
				length = (keys || obj).length,
				results = Array(length),
				currentIndex;
		for(var index = 0; index < length; index++) {
			currentIndex = keys ? keys[index] : index;
			results[index] = iteratee(obj[currentIndex], currentIndex, obj);
		}
		return results;
	}
	function reduce(obj, iteratee, memo, context) {
		if (obj === null) obj = [];
		var keys = obj.length !== +obj.length && Object.keys(),
				length = (keys || obj).length,
				index = 0, currentIndex;
		if (arguments.length < 3) {
			memo = obj[keys ? keys[index++] : index++];
		}
		for (; index < length; index++) {
			currentIndex = keys ? keys[index] : index;
			memo = iteratee(memo, obj[currentIndex], currentIndex, obj);
		}
		return memo;
	}
	function contact(a, b) {
		return a.concat(b);
	}
	list = [[1, 2], [3, 4], [5, 6]];
	function reduceRight(obj, iteratee, memo, context) {
		if (obj === null) return [];
		var keys = obj.length !== +obj.length && Object.keys(obj),
				index = (keys || obj).length,
				currentIndex;
		if (arguments.length < 3) {
			memo = obj[keys ? keys[--index] : --index];
		}
		while(index-- > 0) {
			currentIndex = keys ? keys[index] : index;
			memo = iteratee(memo, obj[currentIndex], currentIndex, obj);
		}
		return memo;
	}
	list = [1, 2, 4];
	function getOdd(num) {
		return num % 2 === 0;
	}
	function findIndex(array, predicate) {
		var length = !array ? 0 : array.length;
		for (let i = 0; i < length; i++) {
			if (predicate(array[i], i, array)) return i;
		}
		return -1;
	}
	function find(obj, predicate) {
		var key;
		// 对象
		if (obj.length !== +obj.length) {
			key = findKey(obj, predicate);
		} else {
			key = findIndex(obj, predicate);
		}
		if (key !== void 0 && key !== -1) return obj[key]; 
	}
	list = [1, 2, 5, 6];
	function toFilter(num) {
		return num % 2 === 0;
	}
	function filter(obj, predicate, context) {
		let results = [];
		if (obj == null) {
			return results;
		}
		_.each(obj, function(value, index, list) {
			if (predicate(value)) {
				results.push(value);
			}
		})
		return results;
	}
	list = [{name: '张宁宁', age: 18}, {name: '张宁宁', age: 70}];
	function where(list, sObj) {
		let results = [];
		let flag = false;
		if (list == null) {
			return results;
		}
		for (let obj of list) {
			for (let key in obj) {
				if (Object.keys(sObj).includes(key)) {
					if (sObj[key] === obj[key]) {
						flag = true;
					} else {
						flag = false;
					}
				} else {
					flag = false;
				}
			}
			if (flag) {
				results.push(obj);
			}
		}
		return results;
  }
  function name() {
    return function(name) {
			console.log(name);
    }
  }
  function container(obj, value, fromIndex) {
    if (obj == null) return false;
    let length = obj.length;
    let index = fromIndex || 0;
    if (obj.indexOf(value) >= 0) {
      return true;
    }
    return false;
  }
  list = [1, 2, 3];
	}
	list = [4, 4, 4, 4];
	function rejectFn (num) {
		return num % 2 === 0;
	}
	console.log(_.reject(list, rejectFn));
	// 如果obj 中的对象都通过 predicate 函数的真值检验那么返回为true
	function every(obj, predicate) {
		if (obj == null) return true;
		let keys = obj.length == +obj.length && Object.keys(obj);
		let currentKey;
		let length = (keys || obj).length;
		for (let index = 0; index < length; index++) {
			currentKey = keys ? keys[index] : index;
			if (!predicate(obj[currentKey])) return false;
		}
		return true;
	}
	function contain(obj, value, fromIndex) {
  if (obj == null) return false;
  let list = obj;
  if (obj.length !== +obj.length) {
    list = obj.values();
	}
	console.log(list.indexOf(value));
  return list.indexOf(value, fromIndex) >= 0;
}
 console.log(contain([1, 2, 3], 2, 'fds'));
 function get(value) {
	 console.log(this);
	 console.log('得到的值', this);
	 console.log(value);
 }
 list = [[1, 2]];
 function pluck(list, name) {
	 let props = [];
	 list.map((obj) => {
		 if (Object.keys(obj).indexOf(name) >= 0) {
			 props.push(obj[name]);
		 } else {
			 props.push(void 0);
		 }
	 });
	 return props;
 }
 let a = [{a: 1}, {b: 2}, {a: '张艺苇'}];
 console.log(pluck(a, 'a'));
 // underscore.js max 函数
 var list = [{name: '张宁宁ds', age: 12}, {name: '张艺苇', age: 40}, {name: '张艺苇', age: 50}];
 function getMax(value) {
   return value.name.length;
 }
 list = [1, 2, 4];
 console.log(_.groupBy(list, function(num) { return num % 2 }));
 list = [{name: '张宁宁', age: 20}, {name: '张宁宁', age: 50}];
 function group(behavior) {
	 return function (list, iteratee, context) {
		 let result = {};
		 _.each(list, function(value, index) {
			 var key = iteratee(value, index, obj);
			 behavior(result, value, key);
		 })
		 return result;
	 }
 }
let groupBy = group(function(result, value, key) {
	result[key] = value;
});
let obj = [1, 2, 4];
let result = groupBy(obj, function(num) {
	return num % 2;
});
console.log('得到的计算result', result);

let countBy = group(function(result, value, key) {
	if (_.has(result, key)) result[key] ++; else result[key] = 1;
});
console.log('得到的计数值', countBy(obj, function(num) {
	return num % 2;
}));
list = [1, 2, 3, 4, 5, 6];
console.log(_.shuffle(list));
let arrLikeObj = document.getElementsByTagName('p');
console.log('长度', arrLikeObj.length);
console.log('类数组对象的类型', Object.prototype.toString.call(arrLikeObj));
console.log('类数组对象', document.getElementsByTagName('p'));
function args() {
	console.log('得到的参数', arguments);
	console.log('得到的参数类型', Object.prototype.toString.call(arguments));
	console.log('参数是否是数组', Array.isArray(arguments));
}
args(1, 2, 3, 4, 5);
</script>
</body>
</html>